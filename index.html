<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Î»vc: Variadic Auto-Curried Lambda Calculus</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="footnote.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {document.write('<scr' + 'ipt type="text/javascript" src="MathJax/MathJax.js?config=default"></scr' + 'ipt>');})();
</script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewselflink" data-pltdoc="x">&#955;<span style="vertical-align: sub; font-size: 80%">vc</span>:<span class="mywbr"> &nbsp;</span> Variadic Auto-<wbr></wbr>Curried Lambda Calculus</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#%28part._sec~3asyntax%29" class="tocviewlink" data-pltdoc="x">Syntax</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#%28part._sec~3asemantics%29" class="tocviewlink" data-pltdoc="x">Semantics</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#%28part._sec~3ainterpeter%29" class="tocviewlink" data-pltdoc="x">Using the Reference Interpreter</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part.__vc__.Variadic_.Auto-.Curried_.Lambda_.Calculus%29" class="tocsubseclink" data-pltdoc="x">&#955;<span style="vertical-align: sub; font-size: 80%">vc</span>:<span class="mywbr"> &nbsp;</span> Variadic Auto-<wbr></wbr>Curried Lambda Calculus</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._sec~3asyntax%29" class="tocsubseclink" data-pltdoc="x">Syntax</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._sec~3asemantics%29" class="tocsubseclink" data-pltdoc="x">Semantics</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._sec~3ainterpeter%29" class="tocsubseclink" data-pltdoc="x">Using the Reference Interpreter</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">7.9</span></div><h2><a name="(part.__vc__.Variadic_.Auto-.Curried_.Lambda_.Calculus)"></a>&#955;<span style="vertical-align: sub; font-size: 80%">vc</span>: Variadic Auto-Curried Lambda Calculus</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Pierce Darragh &lt;<a href="mailto:pierce.darragh@gmail.com">pierce.darragh@gmail.com</a>&gt;</p></span></div><p>This package implements &#955;<span style="vertical-align: sub; font-size: 80%">vc</span>: the lambda calculus extended to
support <span style="font-weight: bold">v</span>ariadic functions and automatic <span style="font-weight: bold">c</span>urrying of multary
functions.</p><p>In a sane lambda calculus implementation, variadic functions and auto-currying
are at odds.
This is because a variadic functions says "I take any number of arguments in my
last parameter" while automatic currying says "Functions may only take one
argument at a time."
When you apply a variadic function to more than one value, a question is
raised: is the second value an additional variadic argument, or is it meant to
be used in the application of the <span style="font-style: italic">result</span> of the first application?</p><p>To resolve this truly nefarious problem, &#955;<span style="vertical-align: sub; font-size: 80%">vc</span> implements what I call
<span style="font-style: italic">superpositions</span>, a term borrowed from quantum physics.
In physics, the superposition is the notion that a system may exist in multiple
distinct states simultaneously until it is observed.
Generally, the states each have a distinct probability, and this probability
plays a role in determining which state will remain when the system is
observed.</p><p>In &#955;<span style="vertical-align: sub; font-size: 80%">vc</span>, the superposition encodes two states<span class="NoteBox"><span class="NoteContent">Either of those states can itself be a superposition, so representing a
superposition of more than two states is possible by nesting.</span></span> that are considered "equally likely" (in that no probability is assigned).
Observation occurs through application.
When a superposition is applied to a value, the value is applied to both the
result of the variadic function that begat the superposition as well as the
variadic function itself as though it were waiting for an additional argument.</p><p>To make this work, variadic functions <span style="font-style: italic">must</span> be declared within the
context of another non-nullary function.
When a variadic function is applied, we evaluate its body with the proper
substitution as though it were a regular unary function.
However, we also construct a new version of the variadic function with an
updated environment.
In this environment, the value bound during application of the parent function
is replaced with the result of the variadic application.</p><p><div class="SIntrapara">This is an implementation of a small, untyped lambda calculus with support for
both automated currying and variadic functions.
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="index.html#%28part._sec~3asyntax%29" class="toptoclink" data-pltdoc="x">1<span class="hspace">&nbsp;</span>Syntax</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="index.html#%28part._sec~3asemantics%29" class="toptoclink" data-pltdoc="x">2<span class="hspace">&nbsp;</span>Semantics</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="index.html#%28part._sec~3ainterpeter%29" class="toptoclink" data-pltdoc="x">3<span class="hspace">&nbsp;</span>Using the Reference Interpreter</a></p></td></tr></table></div></p><h3>1<tt>&nbsp;</tt><a name="(part._sec~3asyntax)"></a>Syntax</h3><p>This section defines the valid syntax that can be used in constructing terms in
&#955;<span style="vertical-align: sub; font-size: 80%">vc</span>.
A superscript <span style="vertical-align: super; font-size: 80%">*</span> indicates a repetition of the preceding item
zero or more times.
The superscript <span style="vertical-align: super; font-size: 80%">+</span> indicates a repetition of the preceding item
one or more times.
The lambda <span class="stt">&#955;</span>, sigma <span class="stt">&#963;</span>, ellipsis <span class="stt">...</span>, and parentheses <span class="stt">()</span> are
all literals.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span style="font-weight: bold">t ::=</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td colspan="3"><p><span style="font-weight: bold">terms:</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">z</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>integer</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">x</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>variable</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#955; (x</span><span style="vertical-align: super; font-size: 80%">*</span><span class="stt">) t)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n-ary function</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#955; (x</span><span style="vertical-align: super; font-size: 80%">+</span><span class="stt"> ...) t)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>variadic function</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#963; t t)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>superposition</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(t</span><span style="vertical-align: super; font-size: 80%">+</span><span class="stt">)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>application</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span style="font-weight: bold">v ::=</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td colspan="3"><p><span style="font-weight: bold">values:</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">z</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>integer value</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#955; () t)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>nullary function value</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#955; (x) t)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>unary function value</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#955; (x ...) t)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>variadic function value</p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(&#963; v v)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>superposition value</p></td></tr></table></p><h3>2<tt>&nbsp;</tt><a name="(part._sec~3asemantics)"></a>Semantics</h3><p>These are the operational semantics of &#955;<span style="vertical-align: sub; font-size: 80%">vc</span>.
The <span class="math">\longrightarrow</span> indicates an evaluation that can be taken in a
single step.
The <span class="math">\longrightarrow^{\ast}</span> indicates an evaluation whose result can be reached
in zero or more steps.
(I have tried to reduce the use of <span class="math">\longrightarrow^{\ast}</span> as much as possible to
provide a small-step semantics, but this was tricky for variadic functions.)</p><p>The <span class="math">\epsilon</span> indicates an error value.
Although I did not specifically label them, any invalid evaluation step will
produce an error value <span class="math">\epsilon</span>.
In almost all cases, these will short-circuit the reference interpreter to be
returned to the user.
The notable exception to this behavior is when an error value is obtained as
the result of evaluating one arm of a superposition, in which case the
superposition collapses and only the other arm remains.
(If both arms produce errors, then an error is returned.)</p><p><span class="math">\lambda</span>, <span class="math">\sigma</span>, <span class="math">\ldots</span>, and <span class="math">\left(\right)</span> are syntactic
literals.
<span class="math">\mathtt{\mathbf{t}}</span> represents terms, <span class="math">\mathtt{\mathbf{x}}</span> represents variables, and <span class="math">\mathtt{\mathbf{v}}</span>
represents values, as per the definitions given in the preceding section.
Subscripts are used on <span class="math">\mathtt{\mathbf{t}}</span>, <span class="math">\mathtt{\mathbf{x}}</span>, and <span class="math">\mathtt{\mathbf{v}}</span> to disambiguate
specific instances, and these subscripts are numbered from left to right in
order of appearance in the conclusion of each judgment rule as a convention.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><div class="math">{\rm E}\text{-}{\rm S {\small UBSTITUTE}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{} \over {\Gamma\left[{\mathtt{\mathbf{x}}}_{1} \mapsto {\mathtt{\mathbf{v}}}_{2}\right]{\ }\vdash{\ } {\mathtt{\mathbf{x}}}_{1} {\ }\longrightarrow{\ } \Gamma{\ }\vdash{\ } {\mathtt{\mathbf{v}}}_{2}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm C {\small URRY}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{} \over {\left(\lambda {\ } \left({\mathtt{\mathbf{x}}}_{1} {\ } {\mathtt{\mathbf{x}}}_{2}^{+} \right) {\ }  {\mathtt{\mathbf{t}}}_{3}\right) {\ }\longrightarrow{\ } \left(\lambda {\ } \left({\mathtt{\mathbf{x}}}_{1} \right) {\ }  \left(\lambda {\ } \left({\mathtt{\mathbf{x}}}_{2}^{+} \right) {\ }  {\mathtt{\mathbf{t}}}_{3}\right)\right)}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} U {\small NCURRY}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{} \over {\left({\mathtt{\mathbf{t}}}_{1}   {\ }   {\mathtt{\mathbf{t}}}_{2}   {\ }   {\mathtt{\mathbf{t}}}_{3} ^{+}\right) {\ }\longrightarrow{\ } \left(\left({\mathtt{\mathbf{t}}}_{1}   {\ }   {\mathtt{\mathbf{t}}}_{2}\right)   {\ }   {\mathtt{\mathbf{t}}}_{3} ^{+}\right)}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} R {\small EDUCE} 1}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{{\mathtt{\mathbf{t}}}_{1} 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{1} &rsquo;}}} \over {{\left({\mathtt{\mathbf{t}}}_{1}   {\ }   {\mathtt{\mathbf{t}}}_{2}\right) 
 {\ }\longrightarrow{\ } 
 \left({\mathtt{\mathbf{t}}}_{1} &rsquo;  {\ }   {\mathtt{\mathbf{t}}}_{2}\right)}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} R {\small EDUCE} 2}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{{\mathtt{\mathbf{t}}}_{2} 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{2} &rsquo;}}} \over {{\left({\mathtt{\mathbf{v}}}_{1}   {\ }   {\mathtt{\mathbf{t}}}_{2}\right) 
 {\ }\longrightarrow{\ } 
 \left({\mathtt{\mathbf{v}}}_{1}   {\ }   {\mathtt{\mathbf{t}}}_{2} &rsquo;\right)}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} N {\small ULL}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{{\mathtt{\mathbf{t}}}_{1} 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{1} &rsquo;}}} \over {{\left(\left(\lambda {\ } \left({\ } \right) {\ }  {\mathtt{\mathbf{t}}}_{1}\right)\right) 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{1} &rsquo;}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} U {\small NARY}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{} \over {\left(\left(\lambda {\ } \left({\mathtt{\mathbf{x}}}_{1} \right) {\ }  {\mathtt{\mathbf{t}}}_{2}\right)   {\ }   {\mathtt{\mathbf{v}}}_{3}\right) {\ }\longrightarrow{\ } \Gamma\left[{\mathtt{\mathbf{x}}}_{1} \mapsto {\mathtt{\mathbf{v}}}_{3}\right]{\ }\vdash{\ } {\mathtt{\mathbf{t}}}_{2}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} V {\small ARIADIC}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{\Gamma\left[{\mathtt{\mathbf{x}}}_{1} \mapsto {\mathtt{\mathbf{v}}}_{2},{\ } {\mathtt{\mathbf{x}}}_{3} \mapsto {\mathtt{\mathbf{v}}}_{5}\right]{\ }\vdash{\ }   {\mathtt{\mathbf{t}}}_{4} 
 {\ }\longrightarrow^{\ast}{\ } 
 {\mathtt{\mathbf{v}}}_{6}}}} \over {{\small 
 \Gamma\left[{\mathtt{\mathbf{x}}}_{1} \mapsto {\mathtt{\mathbf{v}}}_{2}\right]{\ }\vdash{\ }   \left(\left(\lambda {\ } \left({\mathtt{\mathbf{x}}}_{3} {\ } \ldots \right) {\ }  {\mathtt{\mathbf{t}}}_{4}\right)   {\ }   {\mathtt{\mathbf{v}}}_{5}\right) 
 {\ }\longrightarrow{\ } 
 \Gamma\left[{\mathtt{\mathbf{x}}}_{1} \mapsto {\mathtt{\mathbf{v}}}_{6}\right]{\ }\vdash{\ }   \left(\sigma {\ } {\mathtt{\mathbf{v}}}_{6}  {\ }  \left(\lambda {\ } \left({\mathtt{\mathbf{x}}}_{3} {\ } \ldots \right) {\ }  {\mathtt{\mathbf{t}}}_{4}\right)\right)}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm A {\small PP} S {\small UPERPOSITION}}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{\left({\mathtt{\mathbf{v}}}_{1}   {\ }   {\mathtt{\mathbf{v}}}_{3}\right) 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{13}}} {\qquad} {{\left({\mathtt{\mathbf{v}}}_{2}   {\ }   {\mathtt{\mathbf{v}}}_{3}\right) 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{23}}}} \over {{\left(\left(\sigma {\ } {\mathtt{\mathbf{v}}}_{1}  {\ }  {\mathtt{\mathbf{v}}}_{2}\right)   {\ }   {\mathtt{\mathbf{v}}}_{3}\right) 
 {\ }\longrightarrow{\ } 
 \left(\sigma {\ } {\mathtt{\mathbf{t}}}_{13}  {\ }  {\mathtt{\mathbf{t}}}_{23}\right)}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm S {\small UPERPOSITION} R {\small EDUCE} 1}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{{\mathtt{\mathbf{t}}}_{1} 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{1} &rsquo;}}} \over {{\left(\sigma {\ } {\mathtt{\mathbf{t}}}_{1}  {\ }  {\mathtt{\mathbf{t}}}_{2}\right) 
 {\ }\longrightarrow{\ } 
 \left(\sigma {\ } {\mathtt{\mathbf{t}}}_{1}&rsquo;  {\ }  {\mathtt{\mathbf{t}}}_{2}\right)}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm S {\small UPERPOSITION} R {\small EDUCE} 2}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{{{{\mathtt{\mathbf{t}}}_{2} 
 {\ }\longrightarrow{\ } 
 {\mathtt{\mathbf{t}}}_{2} &rsquo;}}} \over {{\left(\sigma {\ } {\mathtt{\mathbf{v}}}_{1}  {\ }  {\mathtt{\mathbf{t}}}_{2}\right) 
 {\ }\longrightarrow{\ } 
 \left(\sigma {\ } {\mathtt{\mathbf{v}}}_{1}  {\ }  {\mathtt{\mathbf{t}}}_{2}&rsquo;\right)}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm S {\small UPERPOSITION} R {\small EDUCE} 3}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{} \over {\left(\sigma {\ } \epsilon  {\ }  {\mathtt{\mathbf{t}}}_{2}\right) {\ }\longrightarrow{\ } {\mathtt{\mathbf{t}}}_{2}}</div></p></td></tr><tr><td><p><div class="math">{\rm E}\text{-}{\rm S {\small UPERPOSITION} R {\small EDUCE} 4}</div></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><div class="math">{} \over {\left(\sigma {\ } {\mathtt{\mathbf{t}}}_{1}  {\ }  \epsilon\right) {\ }\longrightarrow{\ } {\mathtt{\mathbf{t}}}_{1}}</div></p></td></tr></table></p><h3>3<tt>&nbsp;</tt><a name="(part._sec~3ainterpeter)"></a>Using the Reference Interpreter</h3><p>This package provides a reference interpreter for &#955;<span style="vertical-align: sub; font-size: 80%">vc</span>.
After installing this package, you can <span class="RktPn">(</span><span class="RktSym">require</span><span class="stt"> </span><span class="RktSym">lambda-vc</span><span class="RktPn">)</span>.
Only one function is exposed: <span class="RktSym">interp</span>.
The recommended way to interact with this function is through quotation:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">require</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lambda-vc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">42</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktVal">42</span><span class="RktMeta"></span></td></tr></table></blockquote><p>The reference interpreter will accept <span class="stt">lambda</span> in place of <span class="stt">&#955;</span>.
The exposed <span class="RktSym">interp</span> function operates in a big-step style, meaning it
eagerly evaluates results until it gets either a value or an error.
There may come a day when I change the exposed API to provide both small- and
big-step interpreters, but today is not that day.</p><p>In addition, the reference interpreter provides a few arithmetic functions that
can be used: <span class="RktSym">+</span>, <span class="RktSym"><span class="nobreak">-</span></span>, <span class="RktSym">*</span>, and <span class="RktSym">/</span>.
Using these, let&rsquo;s explore variadic functions:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">First,</span><span class="hspace">&nbsp;</span><span class="RktCmt">let's</span><span class="hspace">&nbsp;</span><span class="RktCmt">see</span><span class="hspace">&nbsp;</span><span class="RktCmt">what</span><span class="hspace">&nbsp;</span><span class="RktCmt">happens</span><span class="hspace">&nbsp;</span><span class="RktCmt">when</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">interpret</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">variadic</span><span class="hspace">&nbsp;</span><span class="RktCmt">function.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Now,</span><span class="hspace">&nbsp;</span><span class="RktCmt">let's</span><span class="hspace">&nbsp;</span><span class="RktCmt">apply</span><span class="hspace">&nbsp;</span><span class="RktCmt">it</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">value.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">&#955;vc</span><span class="hspace">&nbsp;</span><span class="RktCmt">does</span><span class="hspace">&nbsp;</span><span class="RktCmt">not</span><span class="hspace">&nbsp;</span><span class="RktCmt">substitute</span><span class="hspace">&nbsp;</span><span class="RktCmt">eagerly,</span><span class="hspace">&nbsp;</span><span class="RktCmt">so</span><span class="hspace">&nbsp;</span><span class="RktCmt">this</span><span class="hspace">&nbsp;</span><span class="RktCmt">is</span><span class="hspace">&nbsp;</span><span class="RktCmt">correct.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Now,</span><span class="hspace">&nbsp;</span><span class="RktCmt">let's</span><span class="hspace">&nbsp;</span><span class="RktCmt">apply</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">second</span><span class="hspace">&nbsp;</span><span class="RktCmt">value.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#963;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">We</span><span class="hspace">&nbsp;</span><span class="RktCmt">can</span><span class="hspace">&nbsp;</span><span class="RktCmt">apply</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">result</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">few</span><span class="hspace">&nbsp;</span><span class="RktCmt">more</span><span class="hspace">&nbsp;</span><span class="RktCmt">times...</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#963;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">15</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">b</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Each time we apply the variadic function, the resulting value is substituted in
for the <span class="stt">a</span> that was previously bound to the preceding value.
As a result, we get a superposition which represents the fact that we don&rsquo;t
know whether we are done applying the function or if it should continue to
accept additional arguments.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>